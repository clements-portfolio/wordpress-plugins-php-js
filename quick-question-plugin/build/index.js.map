{"version":3,"file":"index.js","mappings":"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","sources":["webpack://scc-quick-question-plugin/./src/index.scss","webpack://scc-quick-question-plugin/external window [\"wp\",\"blockEditor\"]","webpack://scc-quick-question-plugin/external window [\"wp\",\"components\"]","webpack://scc-quick-question-plugin/external window [\"wp\",\"element\"]","webpack://scc-quick-question-plugin/webpack/bootstrap","webpack://scc-quick-question-plugin/webpack/runtime/compat get default export","webpack://scc-quick-question-plugin/webpack/runtime/define property getters","webpack://scc-quick-question-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://scc-quick-question-plugin/webpack/runtime/make namespace object","webpack://scc-quick-question-plugin/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './index.scss';\r\nimport { TextControl, Flex, FlexBlock, FlexItem, Button, Icon, PanelBody, PanelRow, ColorPicker } from '@wordpress/components';\r\nimport { InspectorControls, BlockControls, AlignmentToolbar } from \"@wordpress/block-editor\";\r\n\r\nfunction quickQuestionStart() {\r\n  let lockUpdate = false;\r\n  \r\n  wp.data.subscribe(function() {\r\n    const checkBlocks = wp.data.select('core/block-editor').getBlocks().filter(function(block) {\r\n      return block.name == 'sccdomain/quickquestionplugin' && block.attributes.correct == undefined;\r\n    });\r\n\r\n    if (checkBlocks.length && lockUpdate == false) {\r\n      lockUpdate = true;\r\n      wp.data.dispatch('core/editor').lockPostSaving('invalidanswer');\r\n    }\r\n    \r\n    if (!checkBlocks.length && lockUpdate == true) {\r\n      lockUpdate = false;\r\n      wp.data.dispatch('core/editor').unlockPostSaving('invalidanswer');\r\n    }\r\n  })\r\n}\r\n\r\nquickQuestionStart();\r\n\r\nwp.blocks.registerBlockType('sccdomain/quickquestionplugin', {\r\n  title: 'Insert Quick Question',\r\n  description: 'Provide multiple-choice answers to custom questions on any page. Great for one-question surveys and checking reader retention.',\r\n  icon: 'clipboard',\r\n  category: 'common',\r\n  attributes: {\r\n    question: {type: \"string\"},\r\n    answers: {type: \"array\", default: [\"\"]},\r\n    hint: {type: \"string\", default: null},\r\n    hidden: {type: \"boolean\", default: true},\r\n    correct: {type: \"number\", default: undefined},\r\n    background: {type: \"string\", default: \"#eaecff\"},\r\n    alignment: {type: 'string', default: 'left'}\r\n  },\r\n  example: {\r\n    attributes: {\r\n      question: \"What is my favorite color?\",\r\n      answers: ['Red', 'Yellow', 'Blue', 'Black'],\r\n      hint: 'It rhymes with bed!',\r\n      hidden: true,\r\n      correct: 'Red',\r\n      background: '#eaecff',\r\n      alignment: 'left'\r\n    }\r\n  },\r\n  edit: EditComponent,\r\n  save: function (props) {return null}\r\n});\r\n\r\nfunction EditComponent(props) {\r\n  function updateQuestion(value) {\r\n    props.setAttributes({question: value});\r\n  }\r\n\r\n  function updateHint(value) {\r\n    props.setAttributes({hint: value});\r\n  }\r\n\r\n  function markCorrect(index) {\r\n    props.setAttributes({correct: index});\r\n  }\r\n\r\n  function deleteAnswer(deleteIndex) {\r\n    const newAnswers = props.attributes.answers.filter(function(x, index) {\r\n      return index != deleteIndex;\r\n    })\r\n    props.setAttributes({answers: newAnswers});\r\n\r\n    if (deleteIndex == props.attributes.correct) {\r\n      props.setAttributes({correct: undefined});\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"questionEditor\" style={{ background: props.attributes.background, textAlign: props.attributes.alignment }}>\r\n      \r\n      <BlockControls>\r\n        <AlignmentToolbar value={props.attributes.alignment} onChange={e => props.setAttributes({ alignment: e })} />\r\n      </BlockControls>\r\n\r\n      <InspectorControls>\r\n        <PanelBody title=\"Background Color\" initialOpen={true}>\r\n          <PanelRow>\r\n            <ColorPicker color={props.attributes.background} onChangeComplete={e => props.setAttributes({background: e.hex})} disableAlpha={true} />\r\n          </PanelRow>\r\n        </PanelBody>\r\n      </InspectorControls>\r\n\r\n      <div className={\"questionFlex\"} >\r\n            <Icon className=\"mainIcon\" icon=\"clipboard\" />\r\n            <h3 className=\"questionMargin\">Quick Question</h3>\r\n      </div>\r\n      <TextControl style={{textAlign: props.attributes.alignment}} value={props.attributes.question} onChange={updateQuestion} />\r\n      \r\n      <h3>Answers:</h3>\r\n      {props.attributes.answers.map(function (answer, index) {\r\n        return (\r\n          <div>\r\n            <Flex style={{textAlign: props.attributes.alignment}}>\r\n              <FlexBlock>\r\n                <TextControl autoFocus={ answer == undefined } value={answer} style={{textAlign: props.attributes.alignment}} onChange={inputValue => {\r\n                  const newInput = props.attributes.answers.concat([]);\r\n                  newInput[index] = inputValue;\r\n                  props.setAttributes({ answers: newInput })\r\n                }} />\r\n              </FlexBlock>\r\n              <FlexItem>\r\n                <Button onClick={() => markCorrect(index) }>\r\n                  <Icon className={props.attributes.correct == index ? \"answerCorrect\" : \"answerDefault\"} icon={props.attributes.correct == index ? \"yes\" : \"marker\"} />\r\n                </Button>\r\n              </FlexItem>\r\n              <FlexItem>\r\n              <Button className='answerDelete' onClick={() => deleteAnswer(index)}>\r\n                  Delete\r\n                </Button>\r\n              </FlexItem>\r\n            </Flex>\r\n          </div>\r\n        )\r\n      })}\r\n\r\n        <h6 className={props.attributes.hidden == true ? \"hintHidden\" : \"hintShown\"}>Hint:</h6>\r\n        <TextControl style={{textAlign: props.attributes.alignment}} value={props.attributes.hint} onChange={updateHint} className={props.attributes.hidden == true ? \"hintHidden\" : undefined} />\r\n\r\n        <Button isPrimary className=\"buttonMargin\" onClick={() => {\r\n          props.setAttributes({ answers: props.attributes.answers.concat([undefined]) })\r\n        }}>Add New Answer</Button>\r\n\r\n        <Button isSecondary className={props.attributes.hidden == false ? \"hintHidden\" : undefined} onClick={() => props.setAttributes({hidden: false})}>\r\n          Add Hint\r\n        </Button>\r\n\r\n        <Button isDestructive className={props.attributes.hidden == true ? \"hintHidden\": undefined} onClick={() => {\r\n          props.setAttributes({hidden: true})\r\n          updateHint(null);\r\n        }}>\r\n          Remove Hint\r\n        </Button>\r\n    </div>\r\n  );\r\n}"],"names":["TextControl","Flex","FlexBlock","FlexItem","Button","Icon","PanelBody","PanelRow","ColorPicker","InspectorControls","BlockControls","AlignmentToolbar","quickQuestionStart","lockUpdate","wp","data","subscribe","checkBlocks","select","getBlocks","filter","block","name","attributes","correct","undefined","length","dispatch","lockPostSaving","unlockPostSaving","blocks","registerBlockType","title","description","icon","category","question","type","answers","default","hint","hidden","background","alignment","example","edit","EditComponent","save","props","updateQuestion","value","setAttributes","updateHint","markCorrect","index","deleteAnswer","deleteIndex","newAnswers","x","textAlign","e","hex","map","answer","inputValue","newInput","concat"],"sourceRoot":""}